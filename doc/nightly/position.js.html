<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: position.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: position.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * Copyright (c) 2017  Valerii Zinchenko
 * Licensed under MIT (https://github.com/valerii-zinchenko/inheritance-diagram/blob/master/LICENSE.txt)
 * All source files are available at: https://github.com/valerii-zinchenko/inheritance-diagram
 */
'use strict';

var Class = require('class-wrapper').Class;
var Parent = require('./ProcessingNode');
var GraphNode = require('./GraphNode');

/**
 * Position node of interest and all its related nodes
 *
 * The position is relative to the top left corner
 *
 * @class
 * @augments ProcessingNode
 */
// eslint-disable-next-line new-cap
var Position = Class(Parent, null, /** @lends Position.prototype */ {
	/**
	 * Node of interest
	 *
	 * @type {GraphNode}
	 */
	noi: null,

	/**
	 * Maximal allowed children in one row
	 *
	 * @type {Number}
	 */
	maxChildrenInRow: 6,

	/**
	 * An array of children nodes
	 *
	 * @type {Array}
	 */
	_childNodes: [],

	/**
	 * An array of mixin nodes
	 *
	 * @type {Array}
	 */
	_mixinNodes: [],

	/**
	 * Main processing routine
	 *
	 * It executes in the sequence the folowing processors:
	 * 1. Position node of interest
	 * 1. Position parent nodes
	 * 1. Position child nodes
	 * 1. Position mixin nodes
	 *
	 * @param {GraphNode} noi - Node of interest
	 *
	 * @throws {TypeError} "noi" argument is expected to be an instance of GraphNode class
	 */
	process: function(noi) {
		if (!(noi instanceof GraphNode)) {
			throw new TypeError('"noi" argument is expected to be an instance of GraphNode class');
		}

		this.noi = noi;

		this._positionNOI();
		this._positionParents();
		this._positionChildNodes();
		this._positionMixinNodes();
	},

	/**
	 * Position node of interest
	 */
	_positionNOI: function() {
		// eslint-disable-next-line no-magic-numbers
		this.noi.x = ((this.noi.children.length || 1) - 1) / 2;
		this.noi.y = 0;
	},

	/**
	 * Position parent nodes of the NOI
	 */
	_positionParents: function() {
		const x = this.noi.x;
		this.noi.parentStack.forEach((node, index) => {
			node.x = x;
			// eslint-disable-next-line no-magic-numbers
			node.y = -1 - index;
		});
	},

	/**
	 * Position child nodes of the NOI
	 */
	_positionChildNodes: function() {
		// eslint-disable-next-line no-magic-numbers
		var yOffset = this.noi.y + 1;

		this.noi.children.forEach((node, index) => {
			node.x = index;
			node.y = yOffset;
		});
	},

	/**
	 * Position mixin nodes of the NOI
	 */
	_positionMixinNodes: function() {
		// eslint-disable-next-line no-magic-numbers
		var yOffset = this.noi.y - Math.ceil(this.noi.mixes.length / 2) + 1;

		this.noi.mixes.forEach((node, index) => {
			// I do not like this -1.3, but this is fastest way for now to increase the distance between NOI and mixin
			// eslint-disable-next-line no-magic-numbers
			node.x = -1.3;
			node.y = yOffset + index;
		});
	}
});

module.exports = Position;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Diagram.html">Diagram</a></li><li><a href="GraphNode.html">GraphNode</a></li><li><a href="InputAdapter.html">InputAdapter</a></li><li><a href="OutputAdapter.html">OutputAdapter</a></li><li><a href="Position.html">Position</a></li><li><a href="ProcessingNode.html">ProcessingNode</a></li><li><a href="Rendering.html">Rendering</a></li></ul><h3>Global</h3><ul><li><a href="global.html#domContainer">domContainer</a></li><li><a href="global.html#getResult">getResult</a></li><li><a href="global.html#inAdapter">inAdapter</a></li><li><a href="global.html#noi">noi</a></li><li><a href="global.html#outAdapter">outAdapter</a></li><li><a href="global.html#positioning">positioning</a></li><li><a href="global.html#rendering">rendering</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Feb 19 2017 01:04:22 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
